<nav class="navbar">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" />
  
  <div class="nav-left">
    <img src="assets/logo.png" alt="Logo" class="logo-img-navbar" />
    <button class="toggle-btn" (click)="toggleSidebar()">☰</button>
  </div>
  
  <div class="nav-right">
    <div class="nav-icons">
      <a routerLink="/mail" routerLinkActive="active">Configuration Reporting </a>
      <a routerLink="/kpi" routerLinkActive="active">Liste Des Programmes</a>
    </div>

    <!-- User dropdown section -->
    <div class="user-dropdown" (click)="toggleUserDropdown()" tabindex="0" (blur)="isDropdownOpen = false">
      <span class="username">
        {{ currentUser?.firstName }} {{ currentUser?.lastName }}
        <i class="fas fa-caret-down"></i>
      </span>
      <ul class="dropdown-menu" [class.show]="isDropdownOpen">
        <li (click)="logout()">Logout</li>
      </ul>
    </div>
  </div>
</nav>




<aside class="sidebar" [class.closed]="isSidebarClosed">
  <div class="logo-container">
  </div>
  
  <ul class="menu">
    <li class="menu-item-dropdown" (click)="toggleDropdown('dashboards')">
      <a class="menu-item" [routerLink]="'/dashboards'" routerLinkActive="active" (click)="$event.preventDefault()">
        <span class="menu-text">QRQC Niveau 1</span>
        <i class="fas fa-chevron-down dropdown-icon"></i>
      </a>
      <ul class="submenu" [class.open]="dropdownStates['dashboards']">

        <li><a [routerLink]="'/mon'" routerLinkActive="active">Dashboard QRQC NIV 1</a></li>
        <li><a [routerLink]="'/produitQ'" routerLinkActive="active">Qualité(Taux de NC Internes)</a></li>
        <li><a [routerLink]="'/Delai'" routerLinkActive="active">Délai(OTP)</a></li>
        <li><a [routerLink]="'/cout'" routerLinkActive="active">Coût(Efficience)</a></li>
      </ul>
    </li>
    
   <li class="menu-item-dropdown" (click)="toggleDropdown('project-kpis')">
      <a class="menu-item" [routerLink]="'/project-kpis'" routerLinkActive="active" (click)="$event.preventDefault()">
        
        <span class="menu-text">QRQC Niveau 2</span>
        <i class="fas fa-chevron-down dropdown-icon"></i>
      </a>
      <ul class="submenu" [class.open]="dropdownStates['project-kpis']">
                <li><a [routerLink]="'/projetDashboard'" routerLinkActive="active">Dashboard QRQC NIV 2</a></li>

        <li><a [routerLink]="'/efficacite'" routerLinkActive="active">KPI OTD</a></li>
        <li><a [routerLink]="'/project-kpis/qualite'" routerLinkActive="active">KPI Qualité</a></li>
        <li><a [routerLink]="'/projetotd'" routerLinkActive="active">KPI Efficacité (Coût)</a></li>
        <li><a [routerLink]="'/projetip'" routerLinkActive="active">KPI Ip</a></li>

<li class="submenu-item-dropdown" (click)="toggleDropdown('kpi-ip-submenu')">
  <a class="submenu-link" [routerLink]="'/kpi-ip'" routerLinkActive="active" (click)="$event.preventDefault()">
    Ip Form
    <i class="fas fa-chevron-right dropdown-icon"></i>
  </a>
  <ul class="sub-submenu" [class.open]="dropdownStates['kpi-ip-submenu']">
    <li><a [routerLink]="'/kpi-ip/otd'" routerLinkActive="active">OTD</a></li>
    <li><a [routerLink]="'/kpi-ip/efficacite'" routerLinkActive="active">Efficacité</a></li>
    <li><a [routerLink]="'/kpi-ip/nc'" routerLinkActive="active">Non-Conformité</a></li>
  </ul>
</li>

      </ul>
    </li>
    
 
    <li class="menu-item-dropdown" (click)="toggleDropdown('performance-reports')">
      <a class="menu-item" [routerLink]="'/performance-reports'" routerLinkActive="active" (click)="$event.preventDefault()">
        <i class="fas fa-chart-pie"></i>
        <span class="menu-text">Dashboard</span>
        <i class="fas fa-chevron-down dropdown-icon"></i>
      </a>
      <ul class="submenu" [class.open]="dropdownStates['performance-reports']">
        <li><a [routerLink]="'/visuals'" routerLinkActive="active">Statistiques</a></li>
        <li><a [routerLink]="'/stats'" routerLinkActive="active">Details Programmes</a></li>
      </ul>
    </li>
     
    <li class="menu-item-dropdown" (click)="toggleDropdown('causes-plan')">
  <a class="menu-item" [routerLink]="'/causes-plan'" routerLinkActive="active" (click)="$event.preventDefault()">
    <span class="menu-text">Causes & Plan Action</span>
    <i class="fas fa-chevron-down dropdown-icon"></i>
  </a>
  <ul class="submenu" [class.open]="dropdownStates['causes-plan']">
    <li><a [routerLink]="'/analyse-causes'" routerLinkActive="active">Analyse des Causes</a></li>
    <li><a [routerLink]="'/pa'" routerLinkActive="active">Plans d'Action</a></li>
    <li><a [routerLink]="'/causes-plan/status'" routerLinkActive="active">Statut des Plans</a></li>
  </ul>
</li>

 <li class="menu-item-dropdown" (click)="toggleDropdown('causes-plan')">
  <a class="menu-item" [routerLink]="'/causes-plan'" routerLinkActive="active" (click)="$event.preventDefault()">
    <span class="menu-text">OJT</span>
    <i class="fas fa-chevron-down dropdown-icon"></i>
  </a>
  <ul class="submenu" [class.open]="dropdownStates['causes-plan']">
    
  </ul>
</li>



    
    <li class="menu-item-dropdown" (click)="toggleDropdown('metrics')">
      <a class="menu-item" [routerLink]="'/gemini'" routerLinkActive="active" (click)="$event.preventDefault()">
        <span class="menu-text">Analyse AI</span>
        <i class="fas fa-chevron-down dropdown-icon"></i>
      </a>
      <ul class="submenu" [class.open]="dropdownStates['metrics']">
      </ul>
    </li>
    
 

  
    
    <li class="menu-item-dropdown" (click)="toggleDropdown('kpi-documentation')">
      <a class="menu-item" [routerLink]="'/kpi-documentation'" routerLinkActive="active" (click)="$event.preventDefault()">
        <span class="menu-text"> Documentation</span>
        <i class="fas fa-chevron-down dropdown-icon"></i>
      </a>
      <ul class="submenu" [class.open]="dropdownStates['kpi-documentation']">
        <li><a [routerLink]="'/doc'" routerLinkActive="active">Guides</a></li>

      </ul>
    </li>
    
  
  </ul>
</aside>