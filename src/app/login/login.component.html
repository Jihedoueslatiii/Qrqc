<div class="auth-background">

<div class="container" id="container">

  <!-- Sign Up Form -->
  <div class="form-container sign-up-container">
    <div class="logo-container">
      <img src="assets/logo2.png" alt="Register Logo" />
    </div>

    <form [formGroup]="registerForm" (ngSubmit)="onRegister()">
      <h1>Créer un compte</h1>

      <input
        type="text"
        placeholder="Prénom"
        formControlName="firstName"
        [class.invalid]="isFieldInvalid(registerForm, 'firstName')"
      />
      <div class="error-message" *ngIf="isFieldInvalid(registerForm, 'firstName')">
        {{ getFieldError(registerForm, 'firstName') }}
      </div>

      <input
        type="text"
        placeholder="Nom"
        formControlName="lastName"
        [class.invalid]="isFieldInvalid(registerForm, 'lastName')"
      />
      <div class="error-message" *ngIf="isFieldInvalid(registerForm, 'lastName')">
        {{ getFieldError(registerForm, 'lastName') }}
      </div>

      <input
        type="email"
        placeholder="Email"
        formControlName="email"
        [class.invalid]="isFieldInvalid(registerForm, 'email')"
      />
      <div class="error-message" *ngIf="isFieldInvalid(registerForm, 'email')">
        {{ getFieldError(registerForm, 'email') }}
      </div>

      <input
        type="password"
        placeholder="Mot de passe"
        formControlName="password"
        [class.invalid]="isFieldInvalid(registerForm, 'password')"
      />
      <div class="error-message" *ngIf="isFieldInvalid(registerForm, 'password')">
        {{ getFieldError(registerForm, 'password') }}
      </div>

      <input
        type="tel"
        placeholder="Téléphone"
        formControlName="phone"
        [class.invalid]="isFieldInvalid(registerForm, 'phone')"
      />
      <div class="error-message" *ngIf="isFieldInvalid(registerForm, 'phone')">
        {{ getFieldError(registerForm, 'phone') }}
      </div>

      <!-- Role can be hidden or a select if you want -->
      <input type="hidden" formControlName="role" />

      <button type="submit" [disabled]="isLoading">
        {{ isLoading ? 'Chargement...' : 'S\'inscrire' }}
      </button>
    </form>
  </div>

  <!-- Sign In Form -->
  <div class="form-container sign-in-container">
    <div class="logo-container">
      <img src="assets/LOGO_SAFRAN_rvb.jpg" alt="Login Logo" />
    </div>

    <form [formGroup]="loginForm" (ngSubmit)="onLogin()">
      <h1>Connexion</h1>

      <input
        type="email"
        placeholder="Email"
        formControlName="email"
        [class.invalid]="isFieldInvalid(loginForm, 'email')"
      />
      <div class="error-message" *ngIf="isFieldInvalid(loginForm, 'email')">
        {{ getFieldError(loginForm, 'email') }}
      </div>

      <input
        type="password"
        placeholder="Mot de passe"
        formControlName="password"
        [class.invalid]="isFieldInvalid(loginForm, 'password')"
      />
      <div class="error-message" *ngIf="isFieldInvalid(loginForm, 'password')">
        {{ getFieldError(loginForm, 'password') }}
      </div>

      <button type="submit" [disabled]="isLoading">
        {{ isLoading ? 'Chargement...' : 'Se connecter' }}
      </button>

      <div class="error-message" *ngIf="errorMessage">{{ errorMessage }}</div>
    </form>
  </div>

  <!-- Overlay Panels -->
  <div class="overlay-container">
    <div class="overlay">
      <div class="overlay-panel overlay-left">
        <h1>Bienvenue !</h1>
        <p>Veuillez vous connecter avec vos informations personnelles</p>
        <button class="ghost" id="signIn">Connexion</button>
      </div>
      <div class="overlay-panel overlay-right">
        <h1>Bonjour !</h1>
        <p>Entrez vos informations personnelles et commencez votre parcours</p>
        <button class="ghost" id="signUp">S'inscrire</button>
      </div>
    </div>
  </div>

</div>
